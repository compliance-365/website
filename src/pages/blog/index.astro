---
import { getCollection } from 'astro:content';
import Base from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const posts = await getCollection('blog');
---

<Base title="Blog â€” Compliance365" description="Insights on ISO 27001, privacy, AI governance and Essential Eight.">
  <Header />

  <section class="container section">
    <h1>Blog</h1>
    <p class="muted" style="max-width:740px">
      Practical insights on cybersecurity, privacy and AI governance from Compliance365.
    </p>

    <div class="grid-3" style="margin-top:20px">
      {posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()).map(post => (
        <a class="card lift" href={`/blog/${post.slug}`} style="color:inherit">
          <h3>{post.data.title}</h3>
          <p class="muted small">{post.data.description}</p>
          <p class="muted tiny">{new Date(post.data.date).toLocaleDateString()}</p>
        </a>
      ))}
    </div>
  </section>

  <Footer />
</Base>
