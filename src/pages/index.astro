---
import Base from '../layouts/BaseLayout.astro';

const services = await Astro.glob('../../content/services/*.md');
services.sort((a,b)=>a.frontmatter.title.localeCompare(b.frontmatter.title));

const ctas = await import('../../content/globals/ctas.json').then(m=>m.default).catch(() => ({
  primaryLabel: 'Book a 20-minute roadmap call',
  primaryUrl: '/contact',
  secondaryLabel: 'Get the ISO 27001 checklist',
  secondaryUrl: '/resources/iso27001-checklist'
}));

const trust = await import('../../content/globals/trustbar.json').then(m=>m.default).catch(() => ({
  logos: ['ISO 27001', 'SOC 2', 'ISO 27701', 'ISO 42001']
}));

const faqs = await import('../../content/globals/faq.json').then(m=>m.default).catch(() => []);
---

<Base
  title="Compliance365 — Cyber, Privacy & AI Governance"
  description="ISO 27001, ISO 42001, ISO 27701 & SOC 2 delivered faster with automation and SharePoint evidence."
>
  <!-- HERO -->
  <section class="container hero-gradient" style="padding:64px 20px 24px;display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;border-radius:24px;">
    <div>
      <h1 style="font-size:2.4rem;margin:0 0 12px">Audit-ready compliance, simplified.</h1>
      <p class="muted" style="margin:0 0 18px">ISO 27001, ISO 42001, ISO 27701 & SOC 2 for Australian healthcare, government and SaaS — faster, with automated evidence in SharePoint.</p>
      <div class="hero-btns">
        <a class="btn-primary" href={ctas.primaryUrl}>{ctas.primaryLabel}</a>
        <a class="btn-ghost" href={ctas.secondaryUrl}>{ctas.secondaryLabel}</a>
      </div>
      <div style="margin-top:18px" class="logobar">
        {trust.logos.map((l) => <span class="pill">{l}</span>)}
      </div>
      <div style="display:flex;gap:18px;margin-top:18px;flex-wrap:wrap">
        <div class="kpi"><strong>8–12 weeks</strong><span class="muted">ISO 27001 typical</span></div>
        <div class="kpi"><strong>30–50%</strong><span class="muted">less audit effort</span></div>
        <div class="kpi"><strong>100%</strong><span class="muted">audit-ready evidence</span></div>
      </div>
    </div>

    <div class="card" style="padding:0;overflow:hidden">
      <img src={(import.meta.env.BASE_URL) + 'assets/hero-illustration.svg'} alt="Automated evidence & dashboards" style="width:100%;height:auto">
    </div>
  </section>

  <!-- SERVICES -->
  <section class="container" style="padding:24px 0;">
    <h2 style="font-size:1.8rem;margin-bottom:12px">Services</h2>
    <div class="grid-3">
      {services.map((s) => (
        <a class="card" href={s.url}>
          <h3 style="margin-top:0">{s.frontmatter.title}</h3>
          <p class="muted">{s.frontmatter.summary}</p>
          <span class="pill">Learn more →</span>
        </a>
      ))}
    </div>
  </section>

  <!-- PROOF STRIP -->
  <section class="container" style="padding:8px 0;">
    <div class="strip">
      <div><strong>“We passed first time.”</strong> <span class="muted">— Health SaaS CTO (anonymised)</span></div>
      <a class="btn-ghost" href="/contact">Book a roadmap call</a>
    </div>
  </section>

  <!-- FAQ -->
  {faqs.length > 0 && (
    <section class="container" style="padding:24px 0;">
      <h3>FAQs</h3>
      <dl class="faq">
        {faqs.map((f) => (<>
          <dt>{f.q}</dt>
          <dd class="muted">{f.a}</dd>
        </>))}
      </dl>
    </section>
  )}

  <!-- CTA FOOTER -->
  <section class="container" style="padding:24px 0 64px;">
    <div class="card" style="display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap">
      <div>
        <h3 style="margin:0 0 6px">Ready to be audit-ready?</h3>
        <p class="muted" style="margin:0">Get a clear plan, timeline and fixed-scope options.</p>
      </div>
      <a class="btn-primary" href={ctas.primaryUrl}>{ctas.primaryLabel}</a>
    </div>
  </section>
</Base>
