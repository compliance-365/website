---
import Base   from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// ✅ Must be defined up here
const base = import.meta.env.BASE_URL || '/';
const FORMSPREE = 'https://formspree.io/f/mnngvoqe';
---

<Base title="Contact — Compliance365" description="Book a 30-minute call or send us a message.">
  <Header />

  <section class="container section">
    <div class="grid-2" style="align-items:start">
      <div>
        <h1>Contact us</h1>
        <p class="muted">
          We’ll respond within 1 business day. Prefer direct email?  
          <a href="mailto:info@compliance365.com.au">info@compliance365.com.au</a>
        </p>

        <div class="card" style="margin-top:12px">
          <p style="margin:0">
            Or book directly: <a href={base + 'book'}>Book a roadmap call</a>
          </p>
        </div>
      </div>

      <div class="card">
        <form action={FORMSPREE} method="POST">
          <input type="hidden" name="form-name" value="Contact Page" />
          <input type="hidden" name="page" value="contact" />

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
            <label class="small" style="display:flex;flex-direction:column;gap:6px">
              Name
              <input name="name" placeholder="Your name" required
                     style="padding:12px;border-radius:10px;border:1px solid #d8dde8">
            </label>
            <label class="small" style="display:flex;flex-direction:column;gap:6px">
              Email
              <input name="email" type="email" placeholder="name@company.com" required
                     style="padding:12px;border-radius:10px;border:1px solid #d8dde8">
            </label>
          </div>

          <label class="small" style="display:block;margin-top:12px">
            Company
            <input name="company" placeholder="Company"
                   style="width:100%;padding:12px;border-radius:10px;border:1px solid #d8dde8">
          </label>

          <label class="small" style="display:block;margin-top:12px">
            Message
            <textarea name="message" rows="6" placeholder="What do you need help with?"
                      style="width:100%;padding:12px;border-radius:10px;border:1px solid #d8dde8"></textarea>
          </label>

          <button class="btn btn-primary" style="margin-top:12px" type="submit">Send</button>
          <p class="muted small" style="margin:.6rem 0 0">
            By submitting, you agree to our <a href={base + 'privacy'}>Privacy Policy</a>.
          </p>
        </form>
      </div>
    </div>
  </section>

  <Footer />
</Base>
